apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "openclaw-stack.fullname" . }}
  labels:
    {{- include "openclaw-stack.labels" . | nindent 4 }}
data:
  openclaw.json: |
    {
      "gateway": {
        "mode": {{ .Values.openclaw.gateway.mode | quote }},
        "port": {{ .Values.openclaw.gateway.port }},
        "bind": {{ .Values.openclaw.gateway.bind | quote }},
        "auth": {
          "mode": {{ .Values.openclaw.gateway.auth.mode | quote }},
          "allowTailscale": {{ .Values.openclaw.gateway.auth.allowTailscale }}
        },
        "controlUi": {
          "enabled": {{ .Values.openclaw.gateway.controlUi.enabled }}
        }
      },
      "discovery": {
        "mdns": {
          "mode": {{ .Values.openclaw.discovery.mdns.mode | quote }}
        },
        "wideArea": {
          "enabled": {{ .Values.openclaw.discovery.wideArea.enabled }}
        }
      },
      "agents": {
        "defaults": {
          "sandbox": {
            "mode": {{ .Values.openclaw.agents.defaults.sandbox.mode | quote }}
          }
        }
      },
      "tools": {
        "exec": {
          "host": {{ .Values.openclaw.tools.exec.host | quote }},
          "applyPatch": {
            "workspaceOnly": {{ .Values.openclaw.tools.exec.applyPatch.workspaceOnly }}
          }
        }
      },
      "session": {
        "dmScope": {{ .Values.openclaw.session.dmScope | quote }}
      },
      "channels": {
        "dmPolicy": {{ .Values.openclaw.channels.dmPolicy | quote }}
      },
      "logging": {
        "redactSensitive": {{ .Values.openclaw.logging.redactSensitive | quote }}
      }
    }
